<!DOCTYPE HTML>
<html>
<head>
<meta 
     <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Game Safe Demo</title>
<style>	
	body{
		margin:0 auto;
		overflow:hidden;
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}

<!-- @media screen and (orientation:portrait) { -->
	<!-- #gameContainer{ -->
	
		<!-- transform:rotate(90deg); -->
		<!-- -ms-transform:rotate(90deg); 	/* IE 9 */ -->
		<!-- -moz-transform:rotate(90deg); 	/* Firefox */ -->
		<!-- -webkit-transform:rotate(90deg); /* Safari 和 Chrome */ -->
		<!-- -o-transform:rotate(90deg);  -->
		
		<!-- } -->
	<!-- } -->

<!-- @media screen and (orientation:landscape) { -->
	<!-- #gameContainer{ -->
	
		<!-- transform:rotate(0deg); -->
		<!-- -ms-transform:rotate(0deg); 	/* IE 9 */ -->
		<!-- -moz-transform:rotate(0deg); 	/* Firefox */ -->
		<!-- -webkit-transform:rotate(0deg); /* Safari 和 Chrome */ -->
		<!-- -o-transform:rotate(0deg);  -->
		
		<!-- } -->
	<!-- } -->
</style>
</head>
<body>
  <img id="gameContainer" class="gameContainer" src="html5-game-resize-example-bg.jpg" alt="HTML5 Game Example" width="2560" height="1600" onContextMenu="return false;"/>
  <canvas id="canvas"></canvas>
  <script>
  
  <!-- window.onresize = function (event) { -->
  <!-- applyOrientation(); -->
<!-- } -->

 var g = document.getElementById("gameContainer");

<!-- function applyOrientation() { -->
  <!-- if (window.innerHeight > window.innerWidth) { -->
  
	<!-- g.style.webkitTransform = 'rotate(90deg)';  -->
    <!-- g.style.mozTransform    = 'rotate(90deg)';  -->
    <!-- g.style.msTransform     = 'rotate(90deg)';  -->
    <!-- g.style.oTransform      = 'rotate(90deg)';  -->
    <!-- g.style.transform       = 'rotate(90deg)';  -->
  
    <!-- alert("You are now in portrait"); -->
  <!-- } else { -->
	<!-- g.style.webkitTransform = 'rotate(0deg)';  -->
    <!-- g.style.mozTransform    = 'rotate(0deg)';  -->
    <!-- g.style.msTransform     = 'rotate(0deg)';  -->
    <!-- g.style.oTransform      = 'rotate(0deg)';  -->
    <!-- g.style.transform       = 'rotate(0deg)';  -->
    <!-- alert("You are now in landscape"); -->
  <!-- } -->
<!-- } -->
  
 window.onload = function(){
	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	
	//Make the canvas occupy the full page
	var W = window.innerWidth, H = window.innerHeight;
	canvas.width = W;
	canvas.height = H;
	
	var particles = [];
	var mouse = {};
	
	//Lets create some particles now
	var particle_count = 30;
	for(var i = 0; i < particle_count; i++)
	{
		particles.push(new particle());
	}
	
	//finally some mouse tracking
	canvas.addEventListener('mousemove', track_mouse, false);
	
	function track_mouse(e)
	{
		//since the canvas = full page the position of the mouse 
		//relative to the document will suffice
		mouse.x = e.pageX;
		mouse.y = e.pageY;
	}
	
	function particle()
	{
		//speed, life, location, life, colors
		//speed.x range = -2.5 to 2.5 
		//speed.y range = -15 to -5 to make it move upwards
		//lets change the Y speed to make it look like a flame
		this.speed = {x: -2.5+Math.random()*5, y: -15+Math.random()*10};
		//location = mouse coordinates
		//Now the flame follows the mouse coordinates
		if(mouse.x && mouse.y)
		{
			this.location = {x: mouse.x, y: mouse.y};
		}
		else
		{
			this.location = {x: W/2, y: H/2};
		}
		//radius range = 10-30
		this.radius = 10+Math.random()*20;
		//life range = 20-30
		this.life = 20+Math.random()*10;
		this.remaining_life = this.life;
		//colors
		this.r = Math.round(Math.random()*255);
		this.g = Math.round(Math.random()*255);
		this.b = Math.round(Math.random()*255);
	}
	
	function draw()
	{
		//Painting the canvas black
		//Time for lighting magic
		//particles are painted with "lighter"
		//In the next frame the background is painted normally without blending to the 
		//previous frame
		ctx.globalCompositeOperation = "source-over";
		ctx.fillStyle = "black";
		ctx.fillRect(0, 0, W, H);
		ctx.globalCompositeOperation = "lighter";
		
		for(var i = 0; i < particles.length; i++)
		{
			var p = particles[i];
			ctx.beginPath();
			//changing opacity according to the life.
			//opacity goes to 0 at the end of life of a particle
			p.opacity = Math.round(p.remaining_life/p.life*100)/100
			//a gradient instead of white fill
			var gradient = ctx.createRadialGradient(p.location.x, p.location.y, 0, p.location.x, p.location.y, p.radius);
			gradient.addColorStop(0, "rgba("+p.r+", "+p.g+", "+p.b+", "+p.opacity+")");
			gradient.addColorStop(0.5, "rgba("+p.r+", "+p.g+", "+p.b+", "+p.opacity+")");
			gradient.addColorStop(1, "rgba("+p.r+", "+p.g+", "+p.b+", 0)");
			ctx.fillStyle = gradient;
			ctx.arc(p.location.x, p.location.y, p.radius, Math.PI*2, false);
			ctx.fill();
			
			//lets move the particles
			p.remaining_life--;
			p.radius--;
			p.location.x += p.speed.x;
			p.location.y += p.speed.y;
			
			//regenerate particles
			if(p.remaining_life < 0 || p.radius < 0)
			{
				//a brand new particle replacing the dead one
				particles[i] = new particle();
			}
		}
	}
	
	setInterval(draw, 30);
}
  
  (function () {
  
	if (window.matchMedia("(orientation: portrait)").matches) {
		
		
		g.style.webkitTransform = 'rotate(90deg)'; 
		g.style.mozTransform    = 'rotate(90deg)'; 
		g.style.msTransform     = 'rotate(90deg)'; 
		g.style.oTransform      = 'rotate(90deg)'; 
		g.style.transform       = 'rotate(90deg)'; 
	
		 window.addEventListener('orientationchange', function() { location.reload(); }, false);
		
		var game = {
		element: document.getElementById("gameContainer"),
		width: 1280,
		height: 720,
		safeWidth: 720,
		safeHeight: 1280
		}
	}

	if (window.matchMedia("(orientation: landscape)").matches) {
	
		g.style.webkitTransform = 'rotate(0deg)'; 
		g.style.mozTransform    = 'rotate(0deg)'; 
		g.style.msTransform     = 'rotate(0deg)'; 
		g.style.oTransform      = 'rotate(0deg)'; 
		g.style.transform       = 'rotate(0deg)'; 
	
		 window.addEventListener('orientationchange', function() { location.reload(); }, false);
			
		var game = {
		element: document.getElementById("gameContainer"),
		width: 1280,
		height: 720,
		safeWidth: 1280,
		safeHeight: 720
		}
	}
	
	resizeGame = function () {
	
		var viewport, newGameWidth, newGameHeight, newGameX, newGameY;
						
		// Get the dimensions of the viewport
		viewport = {
			width: window.innerWidth,
			height: window.innerHeight
		};
		
		// Determine game size
		if (game.height / game.width > viewport.height / viewport.width) {
		
		<!-- console.log(game.height,game.width,viewport.height,viewport.width); -->
		<!-- console.log(game.height / game.width , viewport.height / viewport.width); -->
		
			if (game.safeHeight / game.width > viewport.height / viewport.width) {
			  // A
			  newGameHeight = viewport.height * game.height / game.safeHeight;
			  newGameWidth = newGameHeight * game.width / game.height;
			} else {
				
			  // B
			  newGameWidth = viewport.width;
			  newGameHeight = newGameWidth * game.height / game.width;
			}
		} else { 
			if (game.height / game.safeWidth > viewport.height / viewport.width) {
				// C
				newGameHeight = viewport.height;
				newGameWidth = newGameHeight * game.width / game.height;
			} else {
				 
				// D
				newGameWidth = viewport.width * game.width / game.safeWidth;
				newGameHeight = newGameWidth * game.height / game.width;
			}
		}
		
		game.element.style.width = newGameWidth + "px";
		game.element.style.height = newGameHeight + "px";
		  
		newGameX = (viewport.width - newGameWidth) / 2;
		newGameY = (viewport.height - newGameHeight) / 2;
				
		// Set the new padding of the game so it will be centered
		game.element.style.margin = newGameY + "px " + newGameX + "px";
	};
window.addEventListener("resize", resizeGame);
resizeGame();
}())</script>
</body>
</html>